{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.lsc","webpack:///external \"dotenv\"","webpack:///external \"download\"","webpack:///external \"nightmare\"","webpack:///external \"p-map-series\"","webpack:///external \"path\""],"names":["require","config","show","nightmare","goto","insert","process","env","EMAIL","PASSWORD","click","wait","COURSE_TO_SCRAPE","evaluate","document","getVideoPageDetails","then","videos","getVideoSrcUrls","downloadVideo","catch","log","e","title","replace","querySelectorAll","videoLinkSelector","map","videoName","videoLink","textContent","videoPageUrl","href","courseTitle","filter","video","querySelector","src","videoSrcUrl","path","join","filename"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;AC/EA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AANA,mBAAAA,CAAQ,sBAAR,EAAkBC,MAAlB;;AAQA,kBAAY,yBAAU,EAAEC,MAAM,IAAR,EAAV,CAAZ;AACA,0BAAoB,sCAApB;;AAEAC,UACGC,IADH,CACQ,iCADR,EAEGC,MAFH,CAEU,WAFV,EAEuBC,QAAQC,GAAR,CAAYC,KAFnC,EAGGH,MAHH,CAGU,WAHV,EAGuBC,QAAQC,GAAR,CAAYE,QAHnC,EAIGC,KAJH,CAIS,QAJT,EAKGC,IALH,CAKQ,IALR,EAMGP,IANH,CAMQE,QAAQC,GAAR,CAAYK,gBANpB,EAOGD,IAPH,CAOQ,IAPR,EAQGE,QARH,CAQY,YAAM;AAAA,6BAAoBC,QAApB;AAA6B,CAR/C,EAQiDC,mBARjD,EASGC,IATH,CASQ,kBAAO;AACX,mCACEC,MADF,EAEEC,eAFF;AAGC,CAbL,EAeGF,IAfH,CAeQ,kBAAO;AACT,mCACAC,MADA,EAEAE,aAFA;AAGD,CAnBL,EAqBGC,KArBH,CAqBS,aAAK;AAAA,iBAAQC,GAAR,CAAYC,CAAZ;AAAc,CArB5B;;AAuBA,6BAAoBR,QAApB,EAA8B;AAAA,MAExB,IAFwB;;AAC5B,sBAAcA,SAASS,KAAT,CAAeC,OAAf,CAAuB,gBAAvB,EAAyC,EAAzC,CAAd;AACA,UAAC,IAAG,gBAASC,gBAAT,CAA0BC,iBAA1B,CAAH,EAAG,IAAH,mBAAG,IAAH,CAAD,EACCC,GADD,CACK,qBAAU;AACb;AACEC,iBAAWC,UAAUC,WAAV,CAAsBN,OAAtB,CAA8B,UAA9B,EAA0C,EAA1C,CADb,EAC4D;AAC1DO,oBAAcF,UAAUG,IAF1B;AAGEC;AAHF;AAIC,GANH,EAQCC,MARD,CAQQ,iBAAS;AAAA,iBAAMH,YAAN;AAAkB,GARnC;AAQoC,CAEtC,yBAAgBI,KAAhB,EAA+B;AAC7B,mBAAU/B,IAAV,CAAe+B,MAAMJ,YAArB,EACGpB,IADH,CACQ,OADR,EAEGA,IAFH,CAEQ,IAFR,EAGGE,QAHH,CAGY,YAAM;AAAA,oBAASuB,aAAT,CAAuB,OAAvB,EAAgCC,GAAhC;AAAmC,GAHrD,EAIGrB,IAJH,CAIQ,uBAAe;AAAA,wBAAImB,KAAJ,IAAWG,WAAX;AAAuB,GAJ9C;AAI+C,CAEjD,uBAAc,EAACA,WAAD,EAAcL,WAAd,EAA2BL,SAA3B,EAAd,EAA6D;AAC3D,iCACEU,WADF,EAEEC,eAAKC,IAAL,CAAU,QAAV,EAAoBP,WAApB,CAFF,EAGE,EAAEQ,UAAUb,SAAZ,EAHF;AAIC,C;;;;;;;;;;;AC3DH,mC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,iC","file":"index-compiled.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.lsc\");\n","\r\nrequire('dotenv').config()\r\n\r\nimport path from 'path'\r\n\r\nimport Nightmare from 'nightmare'\r\nimport pMapSeries from 'p-map-series'\r\nimport download from 'download'\r\n\r\nnightmare = Nightmare({ show: true })\r\nvideoLinkSelector = '.table-of-contents__clip-list-item a'\r\n\r\nnightmare\r\n  .goto('https://app.pluralsight.com/id/')\r\n  .insert('#Username', process.env.EMAIL)\r\n  .insert('#Password', process.env.PASSWORD)\r\n  .click('#login')\r\n  .wait(1000)\r\n  .goto(process.env.COURSE_TO_SCRAPE)\r\n  .wait(3000)\r\n  .evaluate(() -> getVideoPageDetails(document), getVideoPageDetails)\r\n  .then(videos ->\r\n    pMapSeries(\r\n      videos,\r\n      getVideoSrcUrls\r\n    )\r\n  )\r\n  .then(videos ->\r\n      pMapSeries(\r\n      videos,\r\n      downloadVideo\r\n    )\r\n  )\r\n  .catch(e -> console.log(e))\r\n\r\ngetVideoPageDetails(document) ->\r\n  courseTitle = document.title.replace(\" | Pluralsight\", \"\")\r\n  [...document.querySelectorAll(videoLinkSelector)]\r\n  .map(videoLink ->\r\n    {\r\n      videoName: videoLink.textContent.replace(/[^a-z]/ig, \"\"), // so safe filename\r\n      videoPageUrl: videoLink.href,\r\n      courseTitle\r\n    }\r\n  )\r\n  .filter(video -> video.videoPageUrl)\r\n\r\ngetVideoSrcUrls(video):Promise ->\r\n  nightmare.goto(video.videoPageUrl)\r\n    .wait(\"video\")\r\n    .wait(1500)\r\n    .evaluate(() -> document.querySelector(\"video\").src)\r\n    .then(videoSrcUrl -> {...video, videoSrcUrl})\r\n\r\ndownloadVideo({videoSrcUrl, courseTitle, videoName}):Promise ->\r\n  download(\r\n    videoSrcUrl,\r\n    path.join('videos', courseTitle),\r\n    { filename: videoName }\r\n  )\r\n","module.exports = require(\"dotenv\");","module.exports = require(\"download\");","module.exports = require(\"nightmare\");","module.exports = require(\"p-map-series\");","module.exports = require(\"path\");"],"sourceRoot":""}